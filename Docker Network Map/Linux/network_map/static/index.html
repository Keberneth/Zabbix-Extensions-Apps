<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nätverkskarta</title>

  <!-- Bootstrap CSS (keep your existing file name/path) -->
  <link href="bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles -->
  <link href="styles.css" rel="stylesheet">

  <!-- Cytoscape + layout plugin -->
  <script src="cytoscape.min.js"></script>
  <script src="cytoscape-cose-bilkent.js"></script>

  <!-- App logic -->
<script src="filters.js"></script>
<script src="graph.js"></script>
<script src="summary.js"></script>
<script src="netbox.js"></script>
<script src="report.js"></script>
<script src="app.js"></script>
</head>
<body>
  <!-- Global controls -->
  <div id="controls" class="shadow-sm">
    <h3>Nätverkskarta</h3>

    <!-- Host filter row (hidden by default in app.js) -->
    <div id="hostFilterRow" class="mb-2">
      <label for="hostSelect" class="form-label">
        Välj server (tom → globalt filter):
      </label>
      <select id="hostSelect" class="form-select">
        <option value="">— Ingen, globalt filter —</option>
      </select>
    </div>

    <label class="form-label">
      Source:
      <input id="filterSrc" class="form-control form-control-sm" placeholder="node-id">
    </label>

    <label class="form-label">
      Dest:
      <input id="filterDst" class="form-control form-control-sm" placeholder="node-id">
    </label>

    <label class="form-label">
      Port:
      <input id="filterPort" class="form-control form-control-sm" placeholder="443 eller 1-5000">
    </label>

    <div class="form-check mb-2">
      <input class="form-check-input" type="checkbox" id="excludePub">
      <label class="form-check-label" for="excludePub">Exkludera publika IP</label>
    </div>

    <label class="form-label">
      IP/CIDR eller intervall att exkludera:
      <input id="filterIp" class="form-control form-control-sm"
             placeholder="192.168.1.10,10.0.0.0/16,192.168.1.0-192.168.1.68">
    </label>

    <label class="form-label">
      Min avstånd (px):
      <input id="minSep" class="form-control form-control-sm" placeholder="50">
    </label>

    <label class="form-label">
      Horisontell skala:
      <input id="scaleX" class="form-control form-control-sm" placeholder="1.0" value="1.0">
    </label>

    <label class="form-label">
      Vertikal skala:
      <input id="scaleY" class="form-control form-control-sm" placeholder="1.0" value="1.0">
    </label>

    <button id="btnApply" class="btn btn-primary btn-sm mt-2">Rita graf</button>

    <div class="download-wrapper">
      <button id="btnDownloadReport"
              class="btn btn-success btn-sm mt-2 download-button">
        <span id="btnText">Ladda ner Rapport</span>
        <div id="progressBar" class="download-progress"></div>
      </button>

      <button id="toggleDarkMode"
              class="btn btn-secondary btn-sm mt-2 toggle-dark-mode">
        Dark Mode
      </button>
    </div>
  </div>

  <!-- Summary panel -->
  <div id="summary" class="shadow-sm" hidden>
    <div id="summaryHeader">
      <span id="minimizeSummary">[–]</span>
      <span id="closeSummary">[×]</span>
      <strong id="summaryTitle"></strong>
    </div>
    <div id="summaryFilters">
      <label class="form-label">
        Source:
        <input id="sumFilterSrc" class="form-control form-control-sm"
               placeholder="inkludera/exkludera...">
      </label>
      <label class="form-label">
        Dest:
        <input id="sumFilterDst" class="form-control form-control-sm"
               placeholder="inkludera/exkludera...">
      </label>
      <label class="form-label">
        Port:
        <input id="sumFilterPort" class="form-control form-control-sm"
               placeholder="inkludera/exkludera...">
      </label>
    </div>
    <div id="summaryContent"></div>
  </div>

  <!-- NetBox info panel -->
  <div id="nbinfo" class="shadow-sm" hidden>
    <div id="nbHeader">
      <span id="minimizeNb">[–]</span>
      <span id="closeNb">[×]</span>
      <strong id="nbTitle"></strong>
    </div>
    <ul id="nbDetails"></ul>
  </div>

  <!-- Graph container -->
  <div id="cy"></div>

  <!-- Optional spinner overlay -->
  <div id="spinner" class="spinner-border text-primary" role="status">
    <span class="visually-hidden">Laddar…</span>
  </div>
</body>
</html>
